jQuery(function($){var bbcode_editor=$('#editor').get(0);$('#bbcode-toolbar a').on('click',function(event){event.preventDefault();var code_type=$(this).data('code');var start='['+code_type+']';var end='[/'+code_type+']';var prmpt;if(code_type=='img'){var img_prompt=prompt('Enter image URL','http://');if(img_prompt!=null){start+=img_prompt;insert_bbcode(start,end,bbcode_editor);}}else if(code_type=='url'){var url_prompt=prompt('Enter URL','http://');if(url_prompt!=null){start='[url='+ url_prompt+']';insert_bbcode(start,end,bbcode_editor);}}else if(code_type=='ul'){insert_bbcode('[list]\n\n','[/list]',bbcode_editor);}else if(code_type=='ol'){insert_bbcode('[list=1]\n\n','[/list]',bbcode_editor);}else if(code_type=='li'){insert_bbcode('[*]','',bbcode_editor);}else{insert_bbcode(start,end,bbcode_editor);}});function insert_bbcode(start,end,element){if(document.selection){element.focus();sel=document.selection.createRange();sel.text=start+ sel.text+ end;}else if(element.selectionStart||element.selectionStart=='0'){element.focus();var startPos=element.selectionStart;var endPos=element.selectionEnd;element.value=element.value.substring(0,startPos)+ start+ element.value.substring(startPos,endPos)+ end+ element.value.substring(endPos,element.value.length);}else{element.value+=start+ end;}}});